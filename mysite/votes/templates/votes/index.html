<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
{% extends "base.html" %}
{% block content %}
{% load tojson%}
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Images</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
<link href="static/FBPhotoBox/css/fbphotobox.css" rel="stylesheet" type="text/css" />
<script src="static/FBPhotoBox/js/fbphotobox.js"></script>
<script src="static/OscarGodson/jKey/jquery.jkey.js"></script>
<script>

	var a = {{photo_result|tojson|safe}};
	var user_result = {{user_result|tojson|safe}}
	function callLike(){  alert(a[0])}
	$(document).jkey('left',function(){
		$(".left-arrow").click();
	});
        $(document).jkey('right',function(){
        	$(".right-arrow").click();
        });
        $(document).jkey('esc',function(){
        	$(".fbphotobox-close-btn a").click();
        });
	$(document).ready(function() {
		$(".fbphotobox img").fbPhotoBox({
			rightWidth: 360,
			leftBgColor: "black",
			rightBgColor: "white",
			footerBgColor: "black",
			overlayBgColor: "#222",
			containerClassName: 'fbphotobox',
			imageClassName: 'photo',
			onImageShow: function() {
				$(".fbphotobox img").fbPhotoBox("addTags",
						[{x:0.3,y:0.3,w:0.3,h:0.3}]
				);
				$(".fbphotobox-image-content").html(generateHtmlForPhotoPopup($(this).attr("alt")));
			}
		});
		
	});

	function generateHtmlForPhotoPopup(id){

	var picLiked = jQuery.inArray(id,user_result["upvotes"]) > -1;
	var picDisliked = jQuery.inArray(id,user_result["downvotes"]) > -1;
	var html = '<div style="font-size:16px;"> name : '+a[id]['photo_name']+'</div>' +
			'<div style="font-size:16px;"> upvotes('+a[id]['upvotes_names'].length+') : '+a[id]['upvotes_names']+'</div>' +
			'<div style="font-size:16px;"> downvotes('+a[id]['downvotes_names'].length+') : '+a[id]['downvotes_names']+'</div>' +
			'<div class="margin20px"><span id="likeButton" onclick="callLike();">Like</span></div>' + picLiked + picDisliked;
	return html
	}

	
</script>
<style>
	body {
		font-family: 'lucida grande', tahoma, verdana, arial, sans-serif;
		font-size: 13px;
		position: relative;
	}
	
	.fbphotobox img {
		width:200px;
		height:200px;
		margin:10px;
		border-radius:5px;
	}
	
	.fbphotobox img:hover {
		box-sizing:border-box;
		  -moz-box-sizing:border-box;
		  -webkit-box-sizing:border-box;
		border: 5px solid #4AE;
	}
</style>
</head>
<body>
	{% if photo_result %}
		<div class="fbphotobox">
		 {% for key,value in photo_result.iteritems %}
			<a><img class="photo"  alt="{{ key }}" src="static/photos/{{value.photo_name}}"/></a>
		 {% endfor %}
		</div>
	{% else %}
    		<p>No polls are available.</p>
	{% endif %}
</body>
</html>


{% endblock %}
